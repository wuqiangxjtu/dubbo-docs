---
title: 代码整洁之道
notebook: 分享
tags: java
---

# 代码整洁之道
一、勒布朗法则：稍后等于永不。(Later equals never.) 如果遇到了杀手代码，尽量的在当前版本解决问题。

二、没有银弹：这里所表达不会解决所有的问题，也不一定都是完全正确的，大家要有自己的判断。我会在我个人认为重要的准则加粗。

## 有意义的命名
### 名副其实
名称应该答复了所有的大问题，能够告诉你，它为什么会存在，它做什么事，如果名称需要用注释来补充，那就不算是名副其实。
int date; //消逝的时间, 单位是天
int elapseTimeIndays; 

### 避免误导
例如：别用accountList来指定一组账号，如果是List，还勉强可以接受；如果不是list，那应该用accountGroup，accounts等。

### 使用读得出来的名称
不多解释，显而易见

### 不要在名称中加上类型
如：phoneString，应该直接用phone，因为类型改变后，名称可能造成误解

### 类名应该用名词或名词短语
如Customer, Account

### 使用领域名称
如JobQueue, AccountVistor

### 其他
1. Java不需要加成员前缀，类和函数应该足够小，小到很容易查看区分成员类型
2. 不要标明接口，如IHello，可以直接用Hello
3. 方法名应该是动词或动词短语

## 函数
### 短小
短小是函数的第一规则，第二规则是更短小。放宽要求，一个函数最好不要超过30行。超过30行就可以重构了。

### 只做一件事
比如：把大象放进冰箱这件事

### 每个函数一个抽象层级
同样的把大象放进冰箱，内部可以拆分成3个函数，对应3个步骤

### 缩进
if, else, while, switch case中最好只有一行代码

### 使用描述性名称
别害怕长名称，长而具有描述性的名称，要比短而令人费解的名称好得多。并且，长而具有描述性的名称，比描述性的长注释好。更容易使用IDE提供的重构功能。

### 函数参数
+ 尽量别用输出参数,如`Page includeSetupPage()`和`void includeSetupPage(Page page)`对比，后者更难理解
+ 输入参数尽量少，超过3个输入参数，考虑是否使用参数对象
+ 使用异常代替返回错误码

## 注释
### 注释不能美化糟糕的代码
尽量写简洁且有少量注释的代码

### 用代码来阐述

``` java
if（(empolyee.flags & HOURLY_FLAG) && (employee.age > 65)）{
	xxx
}

if(employee.isEliglibleForFullBenefits) {

}
```

### 好注释用来解释为什么这么做，而不是怎么做
### 不用的代码，直接删除掉而不是注释掉，其他人不知道为什么注释掉，不敢删除



